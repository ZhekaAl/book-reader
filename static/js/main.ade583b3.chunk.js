(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t){},156:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(30),l=a.n(r),c=a(13),s=a(14),i=a(16),h=a(15),u=a(17),d=a(3),p=a(161),m=a(159),g=a(160),f=a(18),k=a.n(f),b="https://english-book-reader.herokuapp.com",v=a(5),E=a(49),C=a.n(E);var O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={filename:"",output:"",input:"",chaptersTexts:["q"],chaptersTitles:[],currentPage:1,currentChapter:1,modalIsOpen:!1},a.translate=a.translate.bind(Object(d.a)(Object(d.a)(a))),a.findWord=a.findWord.bind(Object(d.a)(Object(d.a)(a))),a.first=a.first.bind(Object(d.a)(Object(d.a)(a))),a.selectChapter=a.selectChapter.bind(Object(d.a)(Object(d.a)(a))),a.openModal=a.openModal.bind(Object(d.a)(Object(d.a)(a))),a.closeModal=a.closeModal.bind(Object(d.a)(Object(d.a)(a))),a.modalTriggerButton=o.a.createRef(),a.clickButton=a.clickButton.bind(Object(d.a)(Object(d.a)(a))),console.log("Book construct"),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("Book componentDidMount"),console.log("props=",this.props);var e=this.props.match.params.file;console.log("filename=",e),"undefined"!=typeof e&&this.props.onHandleBookChanged(e);var t=this.props.currentChapter;"undefined"!=typeof t&&this.setState({currentChapter:t}),this.openBook(e)}},{key:"clickButton",value:function(){console.log("shsrh"),this.modalTriggerButton.current.props.onClick()}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0}),this.clickButton()}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"first",value:function(){console.log("first"),this.setState(function(e){return{currentChapter:1}})}},{key:"selectChapter",value:function(e){this.props.onCurrentChapterChanged(e),this.setState(function(t){return{currentChapter:e}}),window.scrollTo(0,0)}},{key:"translate",value:function(e,t){var a=this;k.a.get(b+"/api/get-translate/"+e).then(function(e){var t=e.data.data;a.setState({output:t}),a.openModal()}).catch(function(e){return console.log(e)})}},{key:"openBook",value:function(e){var t=this;k.a.get(b+"/api/get-book/"+e).then(function(e){var a=e.data,n=a.data.split(/CHAPTER\s\w*|Chapter\s\w*/g);n.splice(0,1),t.setState({input:a.data,chaptersTitles:a.data.match(/CHAPTER\s\w*|Chapter\s\w*/g),chaptersTexts:n})})}},{key:"findWord",value:function(e){e.preventDefault();for(var t=window.getSelection(),a=t.getRangeAt(0),n=t.anchorNode;0!==a.toString().indexOf(" ");)a.setStart(n,a.startOffset-1);a.setStart(n,a.startOffset+1);do{a.setEnd(n,a.endOffset+1)}while(-1===a.toString().indexOf(" ")&&""!==a.toString().trim()&&a.endOffset<n.length);var o=a.toString().trim();this.translate(o,"ru")}},{key:"render",value:function(){var e=this;console.log("book render",this.state.filename,this.state.currentChapter);var t=this.state.currentChapter,a="";return this.state.chaptersTexts.length>t-1&&(a=function(e){return e="<p>"+(e=(e=(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/\r\n?|\n/g,"<br>")).replace(/<br>\s*<br>/g,"</p><p>"))+"</p>"}(this.state.chaptersTexts[t-1])),o.a.createElement("div",{className:"TranslateForm"},o.a.createElement(v.Pagination,{items:this.state.chaptersTexts.length,activePage:t,maxButtons:7,onSelect:function(t){console.log("selectCh",t),e.selectChapter(t)}}),o.a.createElement("div",{onClick:this.findWord},C()(a)),o.a.createElement(v.Modal,{trigger:o.a.createElement(v.Button,{style:{display:"none"},ref:this.modalTriggerButton},"MODAL"," ")},this.state.output),o.a.createElement(v.Pagination,{items:this.state.chaptersTexts.length,activePage:t,maxButtons:7,onSelect:function(t){console.log("selectCh",t),e.selectChapter(t)}}))}}]),t}(n.Component),j=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(h.a)(t).call(this))).openBooksInfo=function(){var t=Object(d.a)(Object(d.a)(e));k.a.get(b+"/api/get-booksInfo").then(function(e){var a=JSON.parse(e.data.data);console.log("ListBook resp",a),t.setState({booksInfo:a})})},e.renderCard=function(e){return o.a.createElement(v.Card,{header:o.a.createElement(v.CardTitle,{image:b+"/images/"+e.file,waves:"light"}),title:e.title,reveal:o.a.createElement("p",null,e.description)},o.a.createElement("p",null,"autor: ",e.author),o.a.createElement("p",null,o.a.createElement(m.a,{to:{pathname:"/book/"+e.file}},"read book")))},e.renderCardRevial=function(e){return o.a.createElement(v.Col,{m:7,s:12,key:e.title},o.a.createElement(v.Card,{title:e.title,horizontal:!0,header:o.a.createElement(v.CardTitle,{reveal:!0,image:b+"/images/"+e.file}),actions:[o.a.createElement(m.a,{to:{pathname:"/book/"+e.file}},"read book")],reveal:o.a.createElement("p",null,e.description)},o.a.createElement("p",null,"autor: ",e.author),o.a.createElement("p",null,"genre: ",e.genre),o.a.createElement("div",{className:"activator"}," more info"),o.a.createElement("span",{class:"card-title activator grey-text text-darken-4"},"Card Title",o.a.createElement("i",{class:"material-icons right"},"more_vert"))))},e.renderCardHtml=function(e){return o.a.createElement("div",{className:"BookCard card col",key:e.file},o.a.createElement("div",{className:"card-image waves-effect  waves-light"},o.a.createElement("img",{className:"activator",src:b+"/images/"+e.file,alt:""})),o.a.createElement("div",{className:" card-content "},o.a.createElement("span",{className:"card-title activator grey-text text-darken-4"},e.title,o.a.createElement("i",{className:"material-icons right"},"more_vert")),o.a.createElement("p",null,"author: ",e.author),o.a.createElement("p",null,"genre: ",e.genre),o.a.createElement("p",null,o.a.createElement(m.a,{to:{pathname:"/book/"+e.file}},"read book"))),o.a.createElement("div",{className:"card-reveal"},o.a.createElement("span",{className:"card-title grey-text text-darken-4"},e.title,o.a.createElement("i",{className:"material-icons right"},"close")),o.a.createElement("p",null,e.description)))},e.state={bookList:[],booksInfo:[]},e.openBookList=e.openBookList.bind(Object(d.a)(Object(d.a)(e))),console.log("ListBook construct"),e.openBooksInfo(),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"openBookList",value:function(){var e=this;k.a.get(b+"/api/get-listBooks").then(function(t){var a=t.data;console.log("ListBook resp",a),e.setState({bookList:a.data})})}},{key:"renderItem2",value:function(e){var t="/book/"+e;return o.a.createElement(v.CollectionItem,{key:e},o.a.createElement(m.a,{to:t},e))}},{key:"renderItem",value:function(e){return o.a.createElement("p",{key:e},o.a.createElement(m.a,{to:{pathname:"/book/"+e}},e))}},{key:"render",value:function(){return console.log("ListBook render"),this.state.booksInfo.length>0?o.a.createElement("div",{className:"row"},this.state.booksInfo.map(this.renderCardHtml)):o.a.createElement("div",null,"Loading..")}}]),t}(n.Component),B=a(154),y=function(e){function t(){var e;Object(c.a)(this,t),e=Object(i.a)(this,Object(h.a)(t).call(this));var a=B.getItem("fileName");null===a&&(a="");var n=B.getItem("chapter");return n=null===n?1:parseInt(n),console.log("loadLocalStorage",a,n),e.chapter=n,e.state={fileName:a},console.log("App constructor"),e.handleBookChanged=e.handleBookChanged.bind(Object(d.a)(Object(d.a)(e))),e.handleChapterChanged=e.handleChapterChanged.bind(Object(d.a)(Object(d.a)(e))),e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("App componentDidMount")}},{key:"handleChapterChanged",value:function(e){this.chapter=e,B.setItem("chapter",this.chapter)}},{key:"handleBookChanged",value:function(e){B.setItem("fileName",e),console.log(" localStorage.setItem(fileName",e),this.state.fileName!==e&&(this.setState({fileName:e}),this.chapter=1,B.setItem("chapter",1))}},{key:"render",value:function(){var e=this;return console.log("App render"),o.a.createElement(p.a,{basename:"/book-reader"},o.a.createElement("div",null,o.a.createElement(v.Navbar,{left:!0},o.a.createElement(v.NavItem,null,o.a.createElement(m.a,{to:"/"},"Books")),o.a.createElement(v.NavItem,null,o.a.createElement(m.a,{to:{pathname:"/book/"+this.state.fileName}},this.state.fileName))),o.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return o.a.createElement(j,Object.assign({},t,{onHandleBookChanged:e.handleBookChanged}))}}),o.a.createElement(g.a,{exact:!0,path:"/book/:file",render:function(t){return o.a.createElement(O,Object.assign({},t,{onCurrentChapterChanged:e.handleChapterChanged,onHandleBookChanged:e.handleBookChanged,currentChapter:e.chapter}))}}),o.a.createElement(g.a,{path:"/topics"})))}}]),t}(n.Component);a(156);l.a.render(o.a.createElement(y,null),document.getElementById("root"))},52:function(e,t,a){e.exports=a(158)}},[[52,2,1]]]);
//# sourceMappingURL=main.ade583b3.chunk.js.map
{"version":3,"sources":["components/Book.js","config.js","components/ListBook.js","App.js","index.js"],"names":["voice","serverPath","window","speechSynthesis","onvoiceschanged","voices","getVoices","filter","el","lang","includes","console","log","Book","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","sayText","str","length","synth","speaking","error","utterThis","SpeechSynthesisUtterance","onend","event","onerror","pitch","rate","speak","state","filename","output","input","chaptersTexts","chaptersTitles","currentPage","currentChapter","modalIsOpen","translate","bind","assertThisInitialized","findWord","first","selectChapter","openModal","closeModal","modalTriggerButton","React","createRef","clickButton","match","params","file","onHandleBookChanged","chpt","setState","openBook","current","onClick","i","onCurrentChapterChanged","scrollTo","textToTranslate","language","_this2","axios","get","then","response","data","catch","that","resp","texts","split","splice","preventDefault","s","getSelection","range","getRangeAt","node","anchorNode","toString","indexOf","setStart","startOffset","setEnd","endOffset","trim","_this3","text","replace","text2HTML","react_default","a","createElement","className","lib","items","activePage","maxButtons","onSelect","e","ReactHtmlParser","trigger","style","display","ref","class","Component","ListBook","openBooksInfo","JSON","parse","booksInfo","renderCard","oneBookInfo","header","image","waves","title","reveal","description","author","Link","to","pathname","renderCardRevial","m","key","horizontal","actions","genre","renderCardHtml","src","alt","bookList","openBookList","item","map","localStorage","require","App","_fileName","getItem","_chapter","parseInt","chapter","fileName","handleBookChanged","handleChapterChanged","setItem","BrowserRouter","basename","process","left","Route","exact","path","render","components_ListBook","assign","Book_Book","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.cc35000a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { serverPath } from \"../config.js\";\nimport { Pagination, Modal, Button } from \"react-materialize\";\n\nimport ReactHtmlParser from \"react-html-parser\";\n\n//const page_size = 2000;\n\n// wait on voices to be loaded before fetching list\nvar voice;\nvar stringVoices = \"noVoices\";\nwindow.speechSynthesis.onvoiceschanged = function() {\n  stringVoices = \"onvoiceschanged\";\n  var voices = window.speechSynthesis.getVoices();\n\n  // for (var i = 0; i < voices.length; i++) {\n  //  stringVoices.push(\"voices[i].lang\");\n  // }\n\n  // voices.map(el => stringVoices.concat(el.lang));\n  // console.log(\"onvoiceschanged\", voices);\n\n  voice = voices.filter(el => el.lang.includes(\"en-US\"))[0];\n  console.log(voice);\n};\n\nfunction text2HTML(text) {\n  // 1: Plain Text Search\n  text = text\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\");\n\n  // 2: Line Breaks\n  text = text.replace(/\\r\\n?|\\n/g, \"<br>\");\n\n  // 3: Paragraphs\n  text = text.replace(/<br>\\s*<br>/g, \"</p><p>\");\n\n  // 4: Wrap in Paragraph Tags\n  text = \"<p>\" + text + \"</p>\";\n\n  return text;\n}\n\nexport default class Book extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filename: \"\",\n      output: \"\",\n      input: \"\",\n      chaptersTexts: [\"q\"],\n      chaptersTitles: [],\n      currentPage: 1,\n      currentChapter: 1,\n      modalIsOpen: false\n    };\n    this.input = \"\";\n    this.translate = this.translate.bind(this);\n    this.findWord = this.findWord.bind(this);\n    this.first = this.first.bind(this);\n    // this.select = this.select.bind(this);\n    this.selectChapter = this.selectChapter.bind(this);\n    //this.handleHideModal = this.handleHideModal.bind(this);\n\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n\n    this.modalTriggerButton = React.createRef();\n    this.clickButton = this.clickButton.bind(this);\n\n    console.log(\"Book construct\");\n  }\n\n  componentDidMount() {\n    console.log(\"Book componentDidMount\");\n    // Modal.setAppElement(\"#root\");\n    // Modal.setAppElement(\"#root\");\n    console.log(\"props=\", this.props);\n\n    let filename = this.props.match.params.file;\n    console.log(\"filename=\", filename);\n\n    if (typeof filename != \"undefined\") {\n      this.props.onHandleBookChanged(filename);\n    }\n\n    let chpt = this.props.currentChapter;\n    if (typeof chpt != \"undefined\") {\n      this.setState({ currentChapter: chpt });\n    }\n\n    // if (filename === \"\") filename = this.props.filename;\n\n    this.openBook(filename);\n  }\n\n  clickButton() {\n    console.log(\"shsrh\");\n    this.modalTriggerButton.current.props.onClick();\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n    this.clickButton();\n  }\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  first() {\n    console.log(\"first\");\n    this.setState(state => {\n      return {\n        currentChapter: 1\n      };\n    });\n  }\n\n  /*select(i) {\n    this.setState(state => {\n      return {\n        currentPage: i\n      };\n    });\n  }*/\n\n  selectChapter(i) {\n    this.props.onCurrentChapterChanged(i);\n    this.setState(state => {\n      return {\n        currentChapter: i\n      };\n    });\n    window.scrollTo(0, 0);\n  }\n\n  translate(textToTranslate, language) {\n    axios\n      .get(serverPath + \"/api/get-translate/\" + textToTranslate)\n      .then(response => {\n        var output = response.data.data;\n        this.setState({ output });\n        this.openModal();\n      })\n      .catch(error => console.log(error));\n  }\n\n  /*openPdf(filename) {\n    var that = this;\n    axios\n      .get(\"http://localhost:3001/api/get-book_pdf\")\n      .then(function(response) {\n        let resp = response.data;\n        console.log(\"resp\", resp);\n        that.setState({\n          input: resp.data\n        });\n      });\n  }*/\n\n  openBook(filename) {\n    var that = this;\n    // axios.get(\"http://localhost:3001/api/get-book1\").then(function(response) {\n    axios\n      .get(serverPath + \"/api/get-book/\" + filename)\n      .then(function(response) {\n        let resp = response.data;\n        // console.log(\"resp\", resp);\n\n        let texts = resp.data.split(/CHAPTER\\s\\w*|Chapter\\s\\w*/g);\n        texts.splice(0, 1);\n\n        that.setState({\n          input: resp.data,\n          chaptersTitles: resp.data.match(/CHAPTER\\s\\w*|Chapter\\s\\w*/g),\n          chaptersTexts: texts\n          // .splice(0, 1) //remove first \\t\n        });\n        // console.log(resp.data.match(/Chapter\\s\\w*/g));\n        // that.first();\n      });\n  }\n\n  // styleChapters(data) {return  data.replace(/Chapter/, '<span style=\"color: red\">$&</span>')  }\n\n  sayText = str => {\n    if (str.length === 0) return;\n    var synth = window.speechSynthesis;\n\n    if (synth.speaking) {\n      console.error(\"speechSynthesis.speaking\");\n      return;\n    }\n\n    var utterThis = new SpeechSynthesisUtterance(str);\n    utterThis.onend = function(event) {\n      console.log(\"SpeechSynthesisUtterance.onend\");\n    };\n    utterThis.onerror = function(event) {\n      console.error(\"SpeechSynthesisUtterance.onerror\");\n    };\n\n    // voices = synth.getVoices().filter(el=>el.name.includes(\"Eng\"));\n\n    utterThis.voice = voice;\n    utterThis.pitch = 1;\n    utterThis.rate = 1;\n    synth.speak(utterThis);\n  };\n\n  findWord(event) {\n    event.preventDefault();\n    let s = window.getSelection();\n    var range = s.getRangeAt(0);\n    var node = s.anchorNode;\n    while (range.toString().indexOf(\" \") !== 0) {\n      range.setStart(node, range.startOffset - 1);\n    }\n    range.setStart(node, range.startOffset + 1);\n    do {\n      range.setEnd(node, range.endOffset + 1);\n    } while (\n      range.toString().indexOf(\" \") === -1 &&\n      range.toString().trim() !== \"\" &&\n      range.endOffset < node.length\n    );\n    var str = range.toString().trim();\n    this.input = str;\n    //   alert(str);\n\n    var language = \"ru\"; // this.refs.language.value;\n    this.translate(str, language);\n  }\n\n  render() {\n    console.log(\"book render\", this.state.filename, this.state.currentChapter);\n    const currentChapter = this.state.currentChapter;\n    let text = \"\";\n    if (this.state.chaptersTexts.length > currentChapter - 1) {\n      text = text2HTML(this.state.chaptersTexts[currentChapter - 1]);\n      //console.log(currentChapter, this.state.chaptersTexts[currentChapter - 1]);\n    }\n    return (\n      <div className=\"TranslateForm\">\n        {\n          <Pagination\n            items={this.state.chaptersTexts.length}\n            activePage={currentChapter}\n            maxButtons={7}\n            onSelect={e => {\n              console.log(\"selectCh\", e);\n              this.selectChapter(e);\n            }}\n          />\n        }\n        <div onClick={this.findWord}>\n          {/*this.state.input.slice((cpg - 1) * page_size, cpg * page_size)*/\n          //    this.state.chaptersTexts[this.state.currentChapter-1].slice((cpg - 1) * page_size, cpg * page_size)\n          ReactHtmlParser(text)}\n        </div>\n\n        <Modal\n          trigger={\n            <Button style={{ display: \"none\" }} ref={this.modalTriggerButton}>\n              MODAL{\" \"}\n            </Button>\n          }\n        >\n          <div>\n            <h5> {this.state.output}</h5>\n          </div>\n          <div>\n            <h6>{this.input}</h6>\n          </div>\n          <p />\n          {/*<div>{voice !== undefined ? voice.lang : \"\"}</div>\n          <div>{stringVoices}</div>*/}\n          <div\n            class=\"btn-floating waves-effect waves-light red accent-1\"\n            onClick={() => this.sayText(this.input)}\n          >\n            <i class=\"material-icons\">play_circle_outline</i>\n          </div>\n        </Modal>\n\n        {/*<Pagination\n          items={\n            this.state.chaptersTexts[currentChapter - 1].length / this.page_size\n          }\n          activePage={this.state.currentPage}\n          maxButtons={7}\n          onSelect={e => {\n            console.log(\"select\", e);\n            this.select(e);\n          }}\n        />*/}\n\n        {\n          <Pagination\n            items={this.state.chaptersTexts.length}\n            activePage={currentChapter}\n            maxButtons={7}\n            onSelect={e => {\n              console.log(\"selectCh\", e);\n              this.selectChapter(e);\n            }}\n          />\n        }\n      </div>\n    );\n  }\n}\n","const localip1 = \"192.168.1.200\";\nconst localip2 = \"localhost\";\n\n//const server_path_localhost = \"http://localhost:3001\";\nconst server_path_localhost = \"http://\" + localip1 + \":3001\";\nconst heroku_path = \"https://english-book-reader.herokuapp.com\";\nexport const serverPath = heroku_path;\n\nexport default serverPath;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { serverPath } from \"../config.js\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Collection,\n  CollectionItem,\n  Card,\n  Col,\n  CardTitle\n} from \"react-materialize\";\n\nclass ListBook extends Component {\n  constructor() {\n    super();\n    this.state = {\n      bookList: [],\n      booksInfo: []\n    };\n    this.openBookList = this.openBookList.bind(this);\n\n    console.log(\"ListBook construct\");\n    //  this.openBookList();\n    this.openBooksInfo();\n  }\n  openBookList() {\n    var that = this;\n\n    axios.get(serverPath + \"/api/get-listBooks\").then(function(response) {\n      let resp = response.data;\n      console.log(\"ListBook resp\", resp);\n      that.setState({\n        bookList: resp.data\n      });\n      //  that.first();\n    });\n  }\n  openBooksInfo = () => {\n    var that = this;\n\n    axios.get(serverPath + \"/api/get-booksInfo\").then(function(response) {\n      let resp = JSON.parse(response.data.data);\n\n      console.log(\"ListBook resp\", resp);\n      that.setState({\n        booksInfo: resp\n      });\n      //  that.first();\n    });\n  };\n\n  renderItem2(item) {\n    //href={pathname}\n    const pathname = \"/book/\" + item;\n    return (\n      <CollectionItem key={item}>\n        <Link to={pathname}>{item}</Link>\n      </CollectionItem>\n    );\n  }\n\n  renderItem(item) {\n    return (\n      <p key={item}>\n        <Link\n          to={{\n            pathname: \"/book/\" + item\n            // search: item\n            // hash: \"#the-hash\",\n            // state: { fromDashboard: true }\n          }}\n        >\n          {item}\n        </Link>\n      </p>\n    );\n  }\n\n  renderCard = oneBookInfo => {\n    return (\n      <Card\n        header={\n          <CardTitle\n            image={serverPath + \"/images/\" + oneBookInfo.file}\n            waves=\"light\"\n          />\n        }\n        title={oneBookInfo.title}\n        reveal={<p>{oneBookInfo.description}</p>}\n      >\n        <p>autor: {oneBookInfo.author}</p>\n        <p>\n          <Link\n            to={{\n              pathname: \"/book/\" + oneBookInfo.file\n            }}\n          >\n            read book\n          </Link>\n        </p>\n      </Card>\n    );\n  };\n  renderCardRevial = oneBookInfo => {\n    return (\n      <Col m={7} s={12} key={oneBookInfo.title}>\n        <Card\n          title={oneBookInfo.title}\n          horizontal\n          header={\n            <CardTitle\n              reveal\n              image={serverPath + \"/images/\" + oneBookInfo.file}\n            />\n          }\n          actions={[\n            <Link\n              to={{\n                pathname: \"/book/\" + oneBookInfo.file\n              }}\n            >\n              read book\n            </Link>\n          ]}\n          reveal={<p>{oneBookInfo.description}</p>}\n        >\n          <p>autor: {oneBookInfo.author}</p>\n          <p>genre: {oneBookInfo.genre}</p>\n          <div className=\"activator\"> more info</div>\n          <span class=\"card-title activator grey-text text-darken-4\">\n            Card Title<i class=\"material-icons right\">more_vert</i>\n          </span>\n        </Card>\n      </Col>\n    );\n  };\n\n  renderCardHtml = oneBookInfo => {\n    return (\n      <div className=\"BookCard card col\" key={oneBookInfo.file}>\n        <div className=\"card-image waves-effect  waves-light\">\n          <img\n            className=\"activator\"\n            src={serverPath + \"/images/\" + oneBookInfo.file}\n            alt=\"\"\n          />\n        </div>\n        <div className=\" card-content \">\n          <span className=\"card-title activator grey-text text-darken-4\">\n            {oneBookInfo.title}\n            <i className=\"material-icons right\">more_vert</i>\n          </span>\n          <p>author: {oneBookInfo.author}</p>\n          <p>genre: {oneBookInfo.genre}</p>\n          <p>\n            <Link\n              to={{\n                pathname: \"/book/\" + oneBookInfo.file\n              }}\n            >\n              read book\n            </Link>\n          </p>\n        </div>\n        <div className=\"card-reveal\">\n          <span className=\"card-title grey-text text-darken-4\">\n            {oneBookInfo.title}\n            <i className=\"material-icons right\">close</i>\n          </span>\n          <p>{oneBookInfo.description}</p>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n    console.log(\"ListBook render\");\n    /* return (\n      <Collection>{this.state.bookList.map(this.renderItem2)}</Collection>\n      //};\n    );*/\n    if (this.state.booksInfo.length > 0)\n      return (\n        <div className=\"row\">\n          {this.state.booksInfo.map(this.renderCardHtml)}\n        </div>\n      );\n    else return <div>Loading..</div>;\n  }\n}\n\nexport default ListBook;\n","import React, { Component } from \"react\";\n\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport Book from \"./components/Book.js\";\nimport ListBook from \"./components/ListBook.js\";\nimport { Navbar, NavItem } from \"react-materialize\";\nvar localStorage = require(\"localStorage\");\n\n//const Book = ({ match }) => <p>{match.params.file}</p>;\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    let _fileName = localStorage.getItem(\"fileName\");\n    if (_fileName === null) _fileName = \"\";\n\n    let _chapter = localStorage.getItem(\"chapter\");\n    if (_chapter === null) _chapter = 1;\n    else _chapter = parseInt(_chapter);\n\n    console.log(\"loadLocalStorage\", _fileName, _chapter);\n    this.chapter = _chapter;\n    this.state = {\n      fileName: _fileName\n    };\n    console.log(\"App constructor\");\n\n    this.handleBookChanged = this.handleBookChanged.bind(this);\n    this.handleChapterChanged = this.handleChapterChanged.bind(this);\n    // this.loadLocalStorage = this.loadLocalStorage.bind(this);\n    //this.saveToLocalStorage = this.saveToLocalStorage.bind(this);\n    // this.loadLocalStorage();\n  }\n  componentDidMount() {\n    console.log(\"App componentDidMount\");\n    //  this.loadLocalStorage();\n  }\n  /* componentWillUnmount() {\n    this.saveStateToLocalStorage();\n  }*/\n\n  /*loadLocalStorage() {\n    let _fileName = localStorage.getItem(\"fileName\");\n    let _chapter = localStorage.getItem(\"chapter\");\n\n    console.log(\"loadLocalStorage\", _fileName, _chapter);\n\n    if (_chapter !== null) this.chapter = _chapter;\n    if (_fileName !== null) this.setState({ fileName: _fileName });\n\n    // parse the localStorage string and setState\n    /* try {\n      _fileName = JSON.parse(_fileName);\n      _chapter = JSON.parse(_chapter);\n      if (_chapter !== null) this.chapter = _chapter;\n      if (_fileName !== null) this.setState({ fileName: _fileName });\n    } catch (e) {\n      // handle empty string\n      console.log(\"local storahe\", e);\n      //this.setState({ fileName: _fileName });\n    }\n  }\n  */\n\n  /*saveToLocalStorage() {\n    localStorage.setItem(\"fileName\", this.state.fileName);\n    localStorage.setItem(\"chapter\", this.chapter);\n  }*/\n\n  handleChapterChanged(_chapter) {\n    this.chapter = _chapter;\n    localStorage.setItem(\"chapter\", this.chapter);\n  }\n\n  handleBookChanged(_fileName) {\n    localStorage.setItem(\"fileName\", _fileName);\n    console.log(\" localStorage.setItem(fileName\", _fileName);\n\n    if (this.state.fileName !== _fileName) {\n      this.setState({ fileName: _fileName });\n      this.chapter = 1;\n      localStorage.setItem(\"chapter\", 1);\n    }\n  }\n\n  render() {\n    console.log(\"App render\");\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <div>\n          <Navbar left>\n            <NavItem>\n              <Link to=\"/\">Books</Link>\n            </NavItem>\n            <NavItem>\n              <Link\n                to={{\n                  pathname: \"/book/\" + this.state.fileName\n                  // search: item\n                  // hash: \"#the-hash\",\n                  // state: { fromDashboard: true }\n                }}\n              >\n                {this.state.fileName}\n              </Link>\n            </NavItem>\n          </Navbar>\n\n          <Route\n            exact\n            path=\"/\"\n            render={props => (\n              <ListBook\n                {...props}\n                onHandleBookChanged={this.handleBookChanged}\n              />\n            )}\n          />\n          <Route\n            exact\n            path=\"/book/:file\"\n            render={props => (\n              <Book\n                {...props}\n                onCurrentChapterChanged={this.handleChapterChanged}\n                onHandleBookChanged={this.handleBookChanged}\n                currentChapter={this.chapter}\n              />\n            )}\n          />\n          {/* <Route exact path=\"/book/:file\" component={Book} />*/}\n          <Route path=\"/topics\" />\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}
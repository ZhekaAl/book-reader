(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t){},156:function(e,t,a){},158:function(e,t,a){"use strict";a.r(t);var n,o=a(0),r=a.n(o),l=a(30),c=a.n(l),i=a(13),s=a(14),h=a(16),u=a(15),p=a(17),d=a(3),m=a(161),f=a(159),g=a(160),k=a(18),v=a.n(k),b="https://english-book-reader.herokuapp.com",E=a(5),C=a(49),O=a.n(C);window.speechSynthesis.onvoiceschanged=function(){;"onvoiceschanged";var e=window.speechSynthesis.getVoices();n=e.filter(function(e){return e.lang.includes("en-US")})[0],console.log(n)};var y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).sayText=function(e){if(0!==e.length){var t=window.speechSynthesis;if(t.speaking)console.error("speechSynthesis.speaking");else{var a=new SpeechSynthesisUtterance(e);a.onend=function(e){console.log("SpeechSynthesisUtterance.onend")},a.onerror=function(e){console.error("SpeechSynthesisUtterance.onerror")},a.voice=n,a.pitch=1,a.rate=1,t.speak(a)}}},a.state={filename:"",output:"",input:"",chaptersTexts:["q"],chaptersTitles:[],currentPage:1,currentChapter:1,modalIsOpen:!1},a.input="",a.translate=a.translate.bind(Object(d.a)(Object(d.a)(a))),a.findWord=a.findWord.bind(Object(d.a)(Object(d.a)(a))),a.first=a.first.bind(Object(d.a)(Object(d.a)(a))),a.selectChapter=a.selectChapter.bind(Object(d.a)(Object(d.a)(a))),a.openModal=a.openModal.bind(Object(d.a)(Object(d.a)(a))),a.closeModal=a.closeModal.bind(Object(d.a)(Object(d.a)(a))),a.modalTriggerButton=r.a.createRef(),a.clickButton=a.clickButton.bind(Object(d.a)(Object(d.a)(a))),console.log("Book construct"),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("Book componentDidMount"),console.log("props=",this.props);var e=this.props.match.params.file;console.log("filename=",e),"undefined"!=typeof e&&this.props.onHandleBookChanged(e);var t=this.props.currentChapter;"undefined"!=typeof t&&this.setState({currentChapter:t}),this.openBook(e)}},{key:"clickButton",value:function(){console.log("shsrh"),this.modalTriggerButton.current.props.onClick()}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0}),this.clickButton()}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"first",value:function(){console.log("first"),this.setState(function(e){return{currentChapter:1}})}},{key:"selectChapter",value:function(e){this.props.onCurrentChapterChanged(e),this.setState(function(t){return{currentChapter:e}}),window.scrollTo(0,0)}},{key:"translate",value:function(e,t){var a=this;v.a.get(b+"/api/get-translate/"+e).then(function(e){var t=e.data.data;a.setState({output:t}),a.openModal()}).catch(function(e){return console.log(e)})}},{key:"openBook",value:function(e){var t=this;v.a.get(b+"/api/get-book/"+e).then(function(e){var a=e.data,n=a.data.split(/CHAPTER\s\w*|Chapter\s\w*/g);n.splice(0,1),t.setState({input:a.data,chaptersTitles:a.data.match(/CHAPTER\s\w*|Chapter\s\w*/g),chaptersTexts:n})})}},{key:"findWord",value:function(e){e.preventDefault();for(var t=window.getSelection(),a=t.getRangeAt(0),n=t.anchorNode;0!==a.toString().indexOf(" ");)a.setStart(n,a.startOffset-1);a.setStart(n,a.startOffset+1);do{a.setEnd(n,a.endOffset+1)}while(-1===a.toString().indexOf(" ")&&""!==a.toString().trim()&&a.endOffset<n.length);var o=a.toString().trim();this.input=o;this.translate(o,"ru")}},{key:"render",value:function(){var e=this;console.log("book render",this.state.filename,this.state.currentChapter);var t=this.state.currentChapter,a="";return this.state.chaptersTexts.length>t-1&&(a=function(e){return e="<p>"+(e=(e=(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/\r\n?|\n/g,"<br>")).replace(/<br>\s*<br>/g,"</p><p>"))+"</p>"}(this.state.chaptersTexts[t-1])),r.a.createElement("div",{className:"TranslateForm"},r.a.createElement(E.Pagination,{items:this.state.chaptersTexts.length,activePage:t,maxButtons:7,onSelect:function(t){console.log("selectCh",t),e.selectChapter(t)}}),r.a.createElement("div",{onClick:this.findWord},O()(a)),r.a.createElement(E.Modal,{trigger:r.a.createElement(E.Button,{style:{display:"none"},ref:this.modalTriggerButton},"MODAL"," ")},r.a.createElement("div",null,r.a.createElement("h5",null," ",this.state.output)),r.a.createElement("div",null,r.a.createElement("h6",null,this.input)),r.a.createElement("p",null),r.a.createElement("div",{class:"btn-floating waves-effect waves-light red accent-1",onClick:function(){return e.sayText(e.input)}},r.a.createElement("i",{class:"material-icons"},"play_circle_outline"))),r.a.createElement(E.Pagination,{items:this.state.chaptersTexts.length,activePage:t,maxButtons:7,onSelect:function(t){console.log("selectCh",t),e.selectChapter(t)}}))}}]),t}(o.Component),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(h.a)(this,Object(u.a)(t).call(this))).openBooksInfo=function(){var t=Object(d.a)(Object(d.a)(e));v.a.get(b+"/api/get-booksInfo").then(function(e){var a=JSON.parse(e.data.data);console.log("ListBook resp",a),t.setState({booksInfo:a})})},e.renderCard=function(e){return r.a.createElement(E.Card,{header:r.a.createElement(E.CardTitle,{image:b+"/images/"+e.file,waves:"light"}),title:e.title,reveal:r.a.createElement("p",null,e.description)},r.a.createElement("p",null,"autor: ",e.author),r.a.createElement("p",null,r.a.createElement(f.a,{to:{pathname:"/book/"+e.file}},"read book")))},e.renderCardRevial=function(e){return r.a.createElement(E.Col,{m:7,s:12,key:e.title},r.a.createElement(E.Card,{title:e.title,horizontal:!0,header:r.a.createElement(E.CardTitle,{reveal:!0,image:b+"/images/"+e.file}),actions:[r.a.createElement(f.a,{to:{pathname:"/book/"+e.file}},"read book")],reveal:r.a.createElement("p",null,e.description)},r.a.createElement("p",null,"autor: ",e.author),r.a.createElement("p",null,"genre: ",e.genre),r.a.createElement("div",{className:"activator"}," more info"),r.a.createElement("span",{class:"card-title activator grey-text text-darken-4"},"Card Title",r.a.createElement("i",{class:"material-icons right"},"more_vert"))))},e.renderCardHtml=function(e){return r.a.createElement("div",{className:"BookCard card col",key:e.file},r.a.createElement("div",{className:"card-image waves-effect  waves-light"},r.a.createElement("img",{className:"activator",src:b+"/images/"+e.file,alt:""})),r.a.createElement("div",{className:" card-content "},r.a.createElement("span",{className:"card-title activator grey-text text-darken-4"},e.title,r.a.createElement("i",{className:"material-icons right"},"more_vert")),r.a.createElement("p",null,"author: ",e.author),r.a.createElement("p",null,"genre: ",e.genre),r.a.createElement("p",null,r.a.createElement(f.a,{to:{pathname:"/book/"+e.file}},"read book"))),r.a.createElement("div",{className:"card-reveal"},r.a.createElement("span",{className:"card-title grey-text text-darken-4"},e.title,r.a.createElement("i",{className:"material-icons right"},"close")),r.a.createElement("p",null,e.description)))},e.state={bookList:[],booksInfo:[]},e.openBookList=e.openBookList.bind(Object(d.a)(Object(d.a)(e))),console.log("ListBook construct"),e.openBooksInfo(),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"openBookList",value:function(){var e=this;v.a.get(b+"/api/get-listBooks").then(function(t){var a=t.data;console.log("ListBook resp",a),e.setState({bookList:a.data})})}},{key:"renderItem2",value:function(e){var t="/book/"+e;return r.a.createElement(E.CollectionItem,{key:e},r.a.createElement(f.a,{to:t},e))}},{key:"renderItem",value:function(e){return r.a.createElement("p",{key:e},r.a.createElement(f.a,{to:{pathname:"/book/"+e}},e))}},{key:"render",value:function(){return console.log("ListBook render"),this.state.booksInfo.length>0?r.a.createElement("div",{className:"row"},this.state.booksInfo.map(this.renderCardHtml)):r.a.createElement("div",null,"Loading..")}}]),t}(o.Component),B=a(154),S=function(e){function t(){var e;Object(i.a)(this,t),e=Object(h.a)(this,Object(u.a)(t).call(this));var a=B.getItem("fileName");null===a&&(a="");var n=B.getItem("chapter");return n=null===n?1:parseInt(n),console.log("loadLocalStorage",a,n),e.chapter=n,e.state={fileName:a},console.log("App constructor"),e.handleBookChanged=e.handleBookChanged.bind(Object(d.a)(Object(d.a)(e))),e.handleChapterChanged=e.handleChapterChanged.bind(Object(d.a)(Object(d.a)(e))),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){console.log("App componentDidMount")}},{key:"handleChapterChanged",value:function(e){this.chapter=e,B.setItem("chapter",this.chapter)}},{key:"handleBookChanged",value:function(e){B.setItem("fileName",e),console.log(" localStorage.setItem(fileName",e),this.state.fileName!==e&&(this.setState({fileName:e}),this.chapter=1,B.setItem("chapter",1))}},{key:"render",value:function(){var e=this;return console.log("App render"),r.a.createElement(m.a,{basename:"/book-reader"},r.a.createElement("div",null,r.a.createElement(E.Navbar,{left:!0},r.a.createElement(E.NavItem,null,r.a.createElement(f.a,{to:"/"},"Books")),r.a.createElement(E.NavItem,null,r.a.createElement(f.a,{to:{pathname:"/book/"+this.state.fileName}},this.state.fileName))),r.a.createElement(g.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(j,Object.assign({},t,{onHandleBookChanged:e.handleBookChanged}))}}),r.a.createElement(g.a,{exact:!0,path:"/book/:file",render:function(t){return r.a.createElement(y,Object.assign({},t,{onCurrentChapterChanged:e.handleChapterChanged,onHandleBookChanged:e.handleBookChanged,currentChapter:e.chapter}))}}),r.a.createElement(g.a,{path:"/topics"})))}}]),t}(o.Component);a(156);c.a.render(r.a.createElement(S,null),document.getElementById("root"))},52:function(e,t,a){e.exports=a(158)}},[[52,2,1]]]);
//# sourceMappingURL=main.cc35000a.chunk.js.map
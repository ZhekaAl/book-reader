(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(t,e){},155:function(t,e,a){},157:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(29),c=a.n(r),i=a(13),s=a(14),l=a(17),u=a(15),p=a(16),d=a(160),h=a(158),f=a(159),b=a(3),m=a(18),g=a.n(m),k="https://english-book-reader.herokuapp.com",O=a(7),v=a(49),j=a.n(v);var y=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).state={output:"",input:"",chaptersTexts:["q"],chaptersTitles:[],currentPage:1,currentChapter:1,modalIsOpen:!1},t.translate=t.translate.bind(Object(b.a)(Object(b.a)(t))),t.findWord=t.findWord.bind(Object(b.a)(Object(b.a)(t))),t.first=t.first.bind(Object(b.a)(Object(b.a)(t))),t.select=t.select.bind(Object(b.a)(Object(b.a)(t))),t.selectChapter=t.selectChapter.bind(Object(b.a)(Object(b.a)(t))),t.handleHideModal=t.handleHideModal.bind(Object(b.a)(Object(b.a)(t))),t.openModal=t.openModal.bind(Object(b.a)(Object(b.a)(t))),t.closeModal=t.closeModal.bind(Object(b.a)(Object(b.a)(t))),t.modalTriggerButton=o.a.createRef(),t.clickButton=t.clickButton.bind(Object(b.a)(Object(b.a)(t))),t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){console.log("props=",this.props);var t=this.props.match.params.file;console.log("filename=",t),this.openBook(t)}},{key:"clickButton",value:function(){console.log("shsrh"),this.modalTriggerButton.current.props.onClick()}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0}),this.clickButton()}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1})}},{key:"handleHideModal",value:function(){this.setState(function(t){return{openModal:!1}})}},{key:"first",value:function(){console.log("first"),this.setState(function(t){return{currentChapter:1}})}},{key:"select",value:function(t){this.setState(function(e){return{currentPage:t}})}},{key:"selectChapter",value:function(t){this.setState(function(e){return{currentChapter:t}})}},{key:"translate",value:function(t,e){var a=this;g.a.get(k+"/api/get-translate/"+t).then(function(t){var e=t.data.data;a.setState({output:e}),a.openModal()}).catch(function(t){return console.log(t)})}},{key:"openPdf",value:function(t){var e=this;g.a.get("http://localhost:3001/api/get-book_pdf").then(function(t){var a=t.data;console.log("resp",a),e.setState({input:a.data})})}},{key:"openBook",value:function(t){var e=this;g.a.get(k+"/api/get-book/"+t).then(function(t){var a=t.data,n=a.data.split(/CHAPTER\s\w*|Chapter\s\w*/g);n.splice(0,1),e.setState({input:a.data,chaptersTitles:a.data.match(/CHAPTER\s\w*|Chapter\s\w*/g),chaptersTexts:n}),e.first()})}},{key:"findWord",value:function(t){t.preventDefault();for(var e=window.getSelection(),a=e.getRangeAt(0),n=e.anchorNode;0!==a.toString().indexOf(" ");)a.setStart(n,a.startOffset-1);a.setStart(n,a.startOffset+1);do{a.setEnd(n,a.endOffset+1)}while(-1===a.toString().indexOf(" ")&&""!==a.toString().trim()&&a.endOffset<n.length);var o=a.toString().trim();this.translate(o,"ru")}},{key:"render",value:function(){var t=this,e=this.state.currentChapter,a=function(t){return t="<p>"+(t=(t=(t=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/\r\n?|\n/g,"<br>")).replace(/<br>\s*<br>/g,"</p><p>"))+"</p>"}(this.state.chaptersTexts[e-1]);return console.log(e,this.state.chaptersTexts[e-1]),o.a.createElement("div",{className:"TranslateForm"},o.a.createElement("div",{onClick:this.findWord},j()(a)),o.a.createElement(O.Modal,{trigger:o.a.createElement(O.Button,{style:{display:"none"},ref:this.modalTriggerButton},"MODAL"," ")},this.state.output),o.a.createElement(O.Pagination,{items:this.state.chaptersTexts.length,activePage:e,maxButtons:7,onSelect:function(e){console.log("selectCh",e),t.selectChapter(e)}}))}}]),e}(n.Component),E=function(t){function e(){var t;return Object(i.a)(this,e),(t=Object(l.a)(this,Object(u.a)(e).call(this))).state={bookList:[]},t.openBookList=t.openBookList.bind(Object(b.a)(Object(b.a)(t))),t.openBookList(),t}return Object(p.a)(e,t),Object(s.a)(e,[{key:"openBookList",value:function(){var t=this;g.a.get(k+"/api/get-listBooks").then(function(e){var a=e.data;console.log("resp",a),t.setState({bookList:a.data})})}},{key:"renderItem2",value:function(t){var e="/book/"+t;return o.a.createElement(O.CollectionItem,{key:t,href:e},o.a.createElement(h.a,{to:e},t))}},{key:"renderItem",value:function(t){return o.a.createElement("p",{key:t},o.a.createElement(h.a,{to:{pathname:"/book/"+t}},t))}},{key:"render",value:function(){return o.a.createElement(O.Collection,null,this.state.bookList.map(this.renderItem2))}}]),e}(n.Component),C=function(t){function e(){return Object(i.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement(d.a,{basename:"/book-reader"},o.a.createElement("div",null,o.a.createElement(O.Navbar,{left:!0},o.a.createElement(O.NavItem,null,o.a.createElement(h.a,{to:"/"},"Home")),o.a.createElement(O.NavItem,null,o.a.createElement(h.a,{to:"/topics"},"Books"))),o.a.createElement(f.a,{exact:!0,path:"/book/:file",component:y}),o.a.createElement(f.a,{path:"/topics",component:E})))}}]),e}(n.Component);a(155);c.a.render(o.a.createElement(C,null),document.getElementById("root"))},52:function(t,e,a){t.exports=a(157)}},[[52,2,1]]]);
//# sourceMappingURL=main.f01065b6.chunk.js.map
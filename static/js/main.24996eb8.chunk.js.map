{"version":3,"sources":["config.js","components/Book.js","components/ListBook.js","App.js","index.js"],"names":["serverPath","Book","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","output","input","currentPage","modalIsOpen","translate","bind","assertThisInitialized","findWord","first","select","handleHideModal","openModal","closeModal","modalTriggerButton","React","createRef","clickButton","console","log","props","filename","match","params","file","openBook","current","onClick","setState","i","textToTranslate","language","_this2","axios","get","then","response","data","catch","error","that","resp","event","preventDefault","s","window","getSelection","range","getRangeAt","node","anchorNode","toString","indexOf","setStart","startOffset","setEnd","endOffset","trim","length","str","_this3","cpg","react_default","a","createElement","className","slice","lib","trigger","style","display","ref","items","activePage","maxButtons","onSelect","e","Component","ListBook","bookList","openBookList","item","pathname","key","href","Link","to","map","renderItem2","App","BrowserRouter","basename","process","left","Route","exact","path","component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.24996eb8.chunk.js","sourcesContent":["const server_path_localhost = \"http://localhost:3001\";\nconst heroku_path = \"https://english-book-reader.herokuapp.com\";\nexport const serverPath = heroku_path;\n\nexport default serverPath;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { serverPath } from \"../config.js\";\nimport { Pagination, Modal, Button } from \"react-materialize\";\n\nconst page_size = 2000;\n\nexport default class Book extends Component {\n  constructor() {\n    super();\n    this.state = {\n      output: \"\",\n      input: \"\",\n      currentPage: 1,\n      modalIsOpen: false\n    };\n    this.translate = this.translate.bind(this);\n    this.findWord = this.findWord.bind(this);\n    this.first = this.first.bind(this);\n    this.select = this.select.bind(this);\n    this.handleHideModal = this.handleHideModal.bind(this);\n\n    this.openModal = this.openModal.bind(this);\n    this.closeModal = this.closeModal.bind(this);\n\n    this.modalTriggerButton = React.createRef();\n    this.clickButton = this.clickButton.bind(this);\n  }\n\n  componentDidMount() {\n    // Modal.setAppElement(\"#root\");\n    // Modal.setAppElement(\"#root\");\n    console.log(\"props=\", this.props);\n    let filename = this.props.match.params.file;\n    console.log(\"filename=\", filename);\n    this.openBook(filename);\n  }\n\n  clickButton() {\n    console.log(\"shsrh\");\n    this.modalTriggerButton.current.props.onClick();\n  }\n\n  openModal() {\n    this.setState({ modalIsOpen: true });\n    this.clickButton();\n  }\n\n  /* afterOpenModal() {\n    // references are now sync'd and can be accessed.\n    this.subtitle.style.color = \"#f00\";\n  } */\n\n  closeModal() {\n    this.setState({ modalIsOpen: false });\n  }\n\n  handleHideModal() {\n    this.setState(state => {\n      return {\n        openModal: false\n      };\n    });\n  }\n\n  first() {\n    // const size = this.state.input.length;\n    // const firstPage = this.state.input.slice(0,page_size)\n    // const page_number = size/page_size\n    console.log(\"first\");\n    this.setState(state => {\n      return {\n        // currentText: firstPage,\n        // pageNumber:page_number,\n        currentPage: 1\n      };\n    });\n  }\n\n  select(i) {\n    this.setState(state => {\n      return {\n        currentPage: i\n      };\n    });\n  }\n\n  translate(textToTranslate, language) {\n    axios\n      .get(serverPath + \"/api/get-translate/\" + textToTranslate)\n      .then(response => {\n        var output = response.data.data;\n        this.setState({ output });\n        this.openModal();\n      })\n      .catch(error => console.log(error));\n  }\n\n  openPdf(filename) {\n    var that = this;\n    axios\n      .get(\"http://localhost:3001/api/get-book_pdf\")\n      .then(function(response) {\n        let resp = response.data;\n        console.log(\"resp\", resp);\n        that.setState({\n          input: resp.data\n        });\n      });\n  }\n\n  openBook(filename) {\n    var that = this;\n    // axios.get(\"http://localhost:3001/api/get-book1\").then(function(response) {\n    axios\n      .get(serverPath + \"/api/get-book/\" + filename)\n      .then(function(response) {\n        let resp = response.data;\n        console.log(\"resp\", resp);\n        that.setState({\n          input: resp.data\n        });\n        that.first();\n      });\n  }\n\n  findWord(event) {\n    event.preventDefault();\n    let s = window.getSelection();\n    var range = s.getRangeAt(0);\n    var node = s.anchorNode;\n    while (range.toString().indexOf(\" \") !== 0) {\n      range.setStart(node, range.startOffset - 1);\n    }\n    range.setStart(node, range.startOffset + 1);\n    do {\n      range.setEnd(node, range.endOffset + 1);\n    } while (\n      range.toString().indexOf(\" \") === -1 &&\n      range.toString().trim() !== \"\" &&\n      range.endOffset < node.length\n    );\n    var str = range.toString().trim();\n    //   alert(str);\n\n    var language = \"ru\"; // this.refs.language.value;\n    this.translate(str, language);\n  }\n\n  render() {\n    const cpg = this.state.currentPage;\n    return (\n      <div className=\"TranslateForm\">\n        <div onClick={this.findWord}>\n          {this.state.input.slice((cpg - 1) * page_size, cpg * page_size)}\n        </div>\n\n        <Modal\n          trigger={\n            <Button style={{ display: \"none\" }} ref={this.modalTriggerButton}>\n              MODAL{\" \"}\n            </Button>\n          }\n        >\n          {this.state.output}\n        </Modal>\n\n        <Pagination\n          items={this.state.input.length}\n          activePage={this.state.currentPage}\n          maxButtons={8}\n          onSelect={e => {\n            console.log(\"select\", e);\n            this.select(e);\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { serverPath } from \"../config.js\";\nimport { Link } from \"react-router-dom\";\nimport { Collection, CollectionItem } from \"react-materialize\";\n\nclass ListBook extends Component {\n  constructor() {\n    super();\n    this.state = {\n      bookList: []\n    };\n    this.openBookList = this.openBookList.bind(this);\n\n    this.openBookList();\n  }\n  openBookList() {\n    var that = this;\n\n    axios.get(serverPath + \"/api/get-listBooks\").then(function(response) {\n      let resp = response.data;\n      console.log(\"resp\", resp);\n      that.setState({\n        bookList: resp.data\n      });\n      //  that.first();\n    });\n  }\n\n  renderItem2(item) {\n    const pathname = \"/book/\" + item;\n    return (\n      <CollectionItem key={item} href={pathname}>\n        <Link to={pathname}>{item}</Link>\n      </CollectionItem>\n    );\n  }\n\n  renderItem(item) {\n    return (\n      <p key={item}>\n        <Link\n          to={{\n            pathname: \"/book/\" + item\n            // search: item\n            // hash: \"#the-hash\",\n            // state: { fromDashboard: true }\n          }}\n        >\n          {item}\n        </Link>\n      </p>\n    );\n  }\n\n  render() {\n    return (\n      <Collection>{this.state.bookList.map(this.renderItem2)}</Collection>\n      //};\n    );\n  }\n}\n\nexport default ListBook;\n","import React, { Component } from \"react\";\n\n// import \"jquery\";\n// import { Navbar, NavItem, Pagination } from \"react-materialize\";\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\nimport Book from \"./components/Book.js\";\nimport ListBook from \"./components/ListBook.js\";\nimport { Navbar, NavItem } from \"react-materialize\";\n\n// const server_path_localhost = \"http://localhost:3001\";\n// const heroku_path = \"https://english-book-reader.herokuapp.com\";\n// const server_path = server_path_localhost;\n\n//const Book = ({ match }) => <p>{match.params.file}</p>;\n\nclass App extends Component {\n  render() {\n    return (\n      <Router basename={process.env.PUBLIC_URL}>\n        <div>\n          <Navbar left>\n            <NavItem>\n              <Link to=\"/\">Home</Link>\n            </NavItem>\n            <NavItem>\n              <Link to=\"/topics\">Books</Link>\n            </NavItem>\n          </Navbar>\n\n          <Route exact path=\"/book/:file\" component={Book} />\n          <Route path=\"/topics\" component={ListBook} />\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}